# Threat Escalation Flow Diagrams

## 1. Real-Time Frame Processing Loop

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SAFESPHERE THREAT CV ENGINE LOOP                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ INPUT: Video Frame (30 FPS = 33ms per frame)                        â”‚  â”‚
â”‚  â”‚ Source: CCTV Camera or Mobile Device                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MOTION DETECTION                                                     â”‚  â”‚
â”‚  â”‚ - Calculate optical flow                                             â”‚  â”‚
â”‚  â”‚ - Detect moving objects                                              â”‚  â”‚
â”‚  â”‚ - Output: motion_magnitude (0.0 - 1.0)                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚ (if no motion â†’ score = 0.0, skip rest)                     â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PERSON DETECTION & TRACKING                                          â”‚  â”‚
â”‚  â”‚ - HOG + SVM classification                                            â”‚  â”‚
â”‚  â”‚ - YOLO (optional, if installed)                                       â”‚  â”‚
â”‚  â”‚ - Assign person IDs (Kalman filter)                                  â”‚  â”‚
â”‚  â”‚ Output: [person_list with coordinates, IDs]                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ BEHAVIOR ANALYSIS (per person)                                       â”‚  â”‚
â”‚  â”‚ - Gait analysis (running, walking, standing still)                  â”‚  â”‚
â”‚  â”‚ - Hand movements (raised hands, jerky motions) â˜œ suspicious          â”‚  â”‚
â”‚  â”‚ - Posture (aggressive, defensive, normal)                           â”‚  â”‚
â”‚  â”‚ Output: behavior_score (0.0 - 1.0)                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ WEAPON DETECTION                                                     â”‚  â”‚
â”‚  â”‚ - YOLO object detection for firearms, knives, blunt objects        â”‚  â”‚
â”‚  â”‚ - If weapon_score > 0.94 â†’ CRITICAL FLAG âš ï¸                         â”‚  â”‚
â”‚  â”‚ Output: weapon_detected (bool), weapon_score (0.0 - 1.0)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ THREAT SCORE COMPUTATION                                             â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  Base = (motion Ã— 0.35) + (behavior Ã— 0.35) + (weapon Ã— 0.30)    â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  If weapon_detected:                                                â”‚  â”‚
â”‚  â”‚    Adjusted = Base + 0.25 + [context_boost] â†’ capped at 1.0       â”‚  â”‚
â”‚  â”‚  Else:                                                              â”‚  â”‚
â”‚  â”‚    Adjusted = Base + [context_boost]                               â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  Temporal Escalation:                                               â”‚  â”‚
â”‚  â”‚    If threat_score > 0.50 for 3+ consecutive frames:              â”‚  â”‚
â”‚  â”‚      Add +0.10 to +0.15 escalation bonus                           â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CLASSIFICATION & THRESHOLDS                                          â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  score <= 0.40  â†’ LOW      (green)                                  â”‚  â”‚
â”‚  â”‚  0.40 < score <= 0.65  â†’ MEDIUM   (yellow) âš ï¸ [record started]     â”‚  â”‚
â”‚  â”‚  0.65 < score <= 0.85  â†’ HIGH     (orange) ğŸ”´ [backend POST + lock]â”‚  â”‚
â”‚  â”‚  score > 0.85   â†’ CRITICAL (red)   ğŸš¨ [emergency + police]         â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ACTION ROUTING                                                       â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  LOW:      Log locally (no backend call)                             â”‚  â”‚
â”‚  â”‚  MEDIUM:   Log locally + optional recording                          â”‚  â”‚
â”‚  â”‚  HIGH:     POST to backend + screenshot + video recording âœ“          â”‚  â”‚
â”‚  â”‚  CRITICAL: IMMEDIATE emergency dispatch + full telemetry             â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ OPTIONAL: BACKEND API CALL                                           â”‚  â”‚
â”‚  â”‚ (if threat_level >= HIGH)                                            â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  POST /threats/report                                                â”‚  â”‚
â”‚  â”‚  {incident_id, timestamp, camera_id, threat_level, persons,       â”‚  â”‚
â”‚  â”‚   weapons, recommendations, screenshot_url, video_clip_url}        â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  âœ“ Response: {incident_stored, dispatch_status, lockdown_triggered}â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ LOGGING & PERSISTENCE                                               â”‚  â”‚
â”‚  â”‚ - JSONL log file (incidents.jsonl)                                  â”‚  â”‚
â”‚  â”‚ - Screenshot saved (incident_id_frame.jpg)                          â”‚  â”‚
â”‚  â”‚ - Video clip saved (incident_id_clip.mp4)                           â”‚  â”‚
â”‚  â”‚ - Fallback: JSON files in safesphere_backend/pending_incidents/    â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ LOOP: Return to INPUT, next frame (33ms later)                     â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Threat Escalation Decision Tree

```
START: Video Frame Received
â”‚
â”œâ”€ No Motion Detected?
â”‚  â””â”€â†’ score = 0.0 â†’ SKIP TO LOOP (log minimal)
â”‚
â””â”€ Motion Detected: YES
   â”‚
   â”œâ”€ Person Detection
   â”‚  â””â”€â†’ Persons Found: Y/N?
   â”‚     â”œâ”€ NO  â†’ score = 0.1 â†’ LOW (possible false positive)
   â”‚     â””â”€ YES â†’ Continue...
   â”‚        â”‚
   â”‚        â”œâ”€ Behavior Score Calculation
   â”‚        â”‚  â”œâ”€ Normal walking â†’ 0.15
   â”‚        â”‚  â”œâ”€ Jerky/erratic â†’ 0.45
   â”‚        â”‚  â”œâ”€ Running â†’ 0.65
   â”‚        â”‚  â””â”€ Aggressive (raised hands, etc.) â†’ 0.85+
   â”‚        â”‚
   â”‚        â””â”€ Weapon Detection
   â”‚           â”œâ”€ NO weapon â†’ Continue normal scoring
   â”‚           â”‚  â”‚
   â”‚           â”‚  â””â”€ Base = (motion Ã— 0.35) + (behavior Ã— 0.35)
   â”‚           â”‚     â”‚
   â”‚           â”‚     â”œâ”€ Apply Context Boost (+0.05 to +0.25)
   â”‚           â”‚     â”‚
   â”‚           â”‚     â””â”€ Score Check:
   â”‚           â”‚        â”œâ”€ score < 0.40  â†’ ğŸŸ¢ LOW
   â”‚           â”‚        â”‚  â””â”€â†’ Action: Monitor only
   â”‚           â”‚        â”‚
   â”‚           â”‚        â”œâ”€ 0.40 â‰¤ score â‰¤ 0.65  â†’ ğŸŸ¡ MEDIUM
   â”‚           â”‚        â”‚  â””â”€â†’ Action: Start recording (optional alert)
   â”‚           â”‚        â”‚
   â”‚           â”‚        â”œâ”€ 0.65 < score â‰¤ 0.85  â†’ ğŸŸ  HIGH
   â”‚           â”‚        â”‚  â””â”€â†’ Action: Alert security + POST to backend
   â”‚           â”‚        â”‚
   â”‚           â”‚        â””â”€ score > 0.85  â†’ ğŸ”´ CRITICAL
   â”‚           â”‚           â””â”€â†’ Action: Emergency lockdown + police
   â”‚           â”‚
   â”‚           â””â”€ YES weapon detected (confidence > 0.94) âš ï¸
   â”‚              â”‚
   â”‚              â””â”€ IMMEDIATE ESCALATION:
   â”‚                 â”‚
   â”‚                 â”œâ”€ Score = Base + 0.25 (weapon bonus)
   â”‚                 â”‚
   â”‚                 â”œâ”€ score < 0.85  â†’ HIGH (treat as armed)
   â”‚                 â”‚  â””â”€â†’ Action: Alert + backend + recording
   â”‚                 â”‚
   â”‚                 â””â”€ score â‰¥ 0.85  â†’ ğŸ”´ CRITICAL
   â”‚                    â””â”€â†’ Action: FULL EMERGENCY
   â”‚                       â”œâ”€ Lockdown: ACTIVE
   â”‚                       â”œâ”€ Police: NOTIFY
   â”‚                       â”œâ”€ Recording: FULL
   â”‚                       â”œâ”€ Backend: IMMEDIATE POST
   â”‚                       â””â”€ Dashboard: EMERGENCY ALERTS
   â”‚
   â”‚
   â””â”€ Temporal Escalation Check:
      â””â”€ Has score been > 0.50 for 3+ consecutive frames?
         â”œâ”€ YES â†’ Add +0.10 to +0.15 escalation bonus
         â”‚        (Prevents single frame spikes from being ignored)
         â”‚
         â””â”€ NO â†’ Use base score as-is

END: Log frame data + loop to next frame
```

---

## 3. Context Boost Contributions

```
CONTEXT BOOST FACTORS (per frame):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location-Based Context                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Secure area (main entrance, vault, etc.) â”‚ +0.15
â”‚ Semi-public area (hallway, corridor)     â”‚ +0.10
â”‚ Public area (parking lot, open space)    â”‚ +0.05
â”‚ Security blind spot (corner, dark area)  â”‚ +0.12
â”‚ Proximity to exits/escape routes         â”‚ +0.08
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Environmental Context                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Poor lighting (night, shadows)           â”‚ +0.10
â”‚ High crowd density (>10 people)          â”‚ +0.08
â”‚ Isolated person (alone in area)          â”‚ +0.05
â”‚ Near children or vulnerable people       â”‚ +0.12
â”‚ Proximity to valuable assets             â”‚ +0.10
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Threat-Specific Context                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Weapon detected                          â”‚ +0.25 âš ï¸
â”‚ Multiple persons acting together         â”‚ +0.15
â”‚ Repeated threat behavior (same person)   â”‚ +0.12
â”‚ Evasive behavior detected                â”‚ +0.08
â”‚ Tampering with cameras/sensors           â”‚ +0.20
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EXAMPLE APPLICATION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Base Threat Score: 0.58 (MEDIUM)

Contextual Factors Present:
  â”œâ”€ Dark area (poor lighting)      +0.10
  â”œâ”€ Blind corner location          +0.12
  â”œâ”€ Isolated individual            +0.05
  â””â”€ Repeated suspicious behavior   +0.12
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total Context Boost:                +0.39

Final Score: 0.58 + 0.39 = 0.97 â†’ CRITICAL ğŸ”´
(Escalated from MEDIUM to CRITICAL due to context)
```

---

## 4. System Response Timeline (Milliseconds)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            SAFESPHERE RESPONSE TIME BREAKDOWN                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  T=0ms       â†’ Frame captured from camera                        â”‚
â”‚               (30 FPS = 33ms between frames)                     â”‚
â”‚                                                                   â”‚
â”‚  T=0-5ms     â†’ Motion detection (optical flow)                  â”‚
â”‚                                                                   â”‚
â”‚  T=5-12ms    â†’ Person detection & tracking (HOG/YOLO)          â”‚
â”‚                                                                   â”‚
â”‚  T=12-18ms   â†’ Behavior analysis (gait, posture)                â”‚
â”‚                                                                   â”‚
â”‚  T=18-22ms   â†’ Weapon detection (YOLO object detection)         â”‚
â”‚                                                                   â”‚
â”‚  T=22-25ms   â†’ Threat scoring & classification                  â”‚
â”‚                                                                   â”‚
â”‚  T=25-28ms   â†’ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—        â”‚
â”‚                â•‘  DECISION POINT: Notify Backend?     â•‘        â”‚
â”‚                â•‘  â”œâ”€ LOW/MEDIUM â†’ Local log only      â•‘        â”‚
â”‚                â•‘  â”œâ”€ HIGH â†’ POST to backend âœ“         â•‘        â”‚
â”‚                â•‘  â””â”€ CRITICAL â†’ Emergency dispatch    â•‘        â”‚
â”‚                â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â”‚
â”‚                                                                   â”‚
â”‚  T=28-32ms   â†’ Queue incident (screenshot + JSON)              â”‚
â”‚                                                                   â”‚
â”‚  T=32ms      â†’ (If HIGH/CRITICAL) POST /threats/report          â”‚
â”‚                to backend via HTTPS                             â”‚
â”‚                                                                   â”‚
â”‚  T=50-100ms  â†’ Backend receives incident JSON                   â”‚
â”‚                â””â”€ Supabase inserts row                          â”‚
â”‚                â””â”€ Dispatch logic triggers                       â”‚
â”‚                â””â”€ Police notification sent (async)              â”‚
â”‚                â””â”€ Dashboard updates (WebSocket)                 â”‚
â”‚                â””â”€ Lockdown command queued                       â”‚
â”‚                                                                   â”‚
â”‚  T=200-300ms â†’ Police dispatch confirmation received            â”‚
â”‚                Lockdown systems activate                        â”‚
â”‚                Emergency alerts broadcast                       â”‚
â”‚                                                                   â”‚
â”‚  TOTAL: 300-500ms from weapon detection to full emergency       â”‚
â”‚         response (vs 30-60s for manual detection)   â† 90% FASTERâ”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Multi-Camera Orchestration (Enterprise Scenario)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SAFESPHERE MULTI-CAMERA SETUP                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚                     ğŸ¢ FACILITY NETWORK                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ CCTV Camera  â”‚  â”‚ CCTV Camera  â”‚  â”‚ Door Camera  â”‚         â”‚
â”‚  â”‚ (Main Gate)  â”‚  â”‚ (Parking Lot)â”‚  â”‚ (Office 1)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                            â”‚                                    â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚  SafeSphere Engine â”‚                        â”‚
â”‚                  â”‚  (Threat CV)       â”‚                        â”‚
â”‚                  â”‚                    â”‚â—„â”€â”€â”€ Parallel frame     â”‚
â”‚                  â”‚  Processes:        â”‚     processing         â”‚
â”‚                  â”‚  - 3 camera feeds  â”‚     (GPU optimized)   â”‚
â”‚                  â”‚  - 30 FPS each     â”‚                        â”‚
â”‚                  â”‚  - Independent     â”‚                        â”‚
â”‚                  â”‚    threat scores   â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                            â”‚                                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚         â”‚                  â”‚                  â”‚                â”‚
â”‚         â–¼                  â–¼                  â–¼                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ Incident   â”‚    â”‚ Incident   â”‚    â”‚ Incident   â”‚       â”‚
â”‚    â”‚ Detection  â”‚    â”‚ Detection  â”‚    â”‚ Detection  â”‚       â”‚
â”‚    â”‚ (Score     â”‚    â”‚ (Score     â”‚    â”‚ (Score     â”‚       â”‚
â”‚    â”‚  0.75)     â”‚    â”‚  0.42)     â”‚    â”‚  0.95)     â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                 â”‚                 â”‚               â”‚
â”‚           â”‚ HIGH âœ“          â”‚ LOW             â”‚ CRITICAL ğŸ”´   â”‚
â”‚           â”‚ POST to backend â”‚ Local log only  â”‚ EMERGENCY     â”‚
â”‚           â”‚                 â”‚                 â”‚               â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â”‚                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â”‚  Backend API     â”‚                       â”‚
â”‚                    â”‚  (FastAPI)       â”‚                       â”‚
â”‚                    â”‚                  â”‚                       â”‚
â”‚                    â”‚  Receives both   â”‚                       â”‚
â”‚                    â”‚  HIGH & CRITICAL â”‚                       â”‚
â”‚                    â”‚  incidents       â”‚                       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                             â”‚                                 â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚          â”‚                  â”‚                  â”‚              â”‚
â”‚          â–¼                  â–¼                  â–¼              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚  Supabase    â”‚  â”‚  Dashboard   â”‚  â”‚   Police    â”‚    â”‚
â”‚    â”‚  Database    â”‚  â”‚  (Real-time) â”‚  â”‚  Dispatch   â”‚    â”‚
â”‚    â”‚              â”‚  â”‚              â”‚  â”‚  System     â”‚    â”‚
â”‚    â”‚ - Store      â”‚  â”‚ - Show all   â”‚  â”‚             â”‚    â”‚
â”‚    â”‚   incidents  â”‚  â”‚   active     â”‚  â”‚ Receives:   â”‚    â”‚
â”‚    â”‚ - Link media â”‚  â”‚   threats    â”‚  â”‚ - Incident  â”‚    â”‚
â”‚    â”‚ - Track      â”‚  â”‚ - Map view   â”‚  â”‚ - Location  â”‚    â”‚
â”‚    â”‚   history    â”‚  â”‚ - Escalate   â”‚  â”‚ - Video     â”‚    â”‚
â”‚    â”‚              â”‚  â”‚   alerts     â”‚  â”‚ - ETA       â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  ğŸ“Š AGGREGATED VIEW:                                         â”‚
â”‚  â”œâ”€ Total incidents (7 today)                               â”‚
â”‚  â”œâ”€ By severity: LOW(4) MEDIUM(2) HIGH(1) CRITICAL(0)      â”‚
â”‚  â”œâ”€ Response times: avg 180ms detection                     â”‚
â”‚  â””â”€ Media storage: 450 screenshots, 12 video clips          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Threat Level Confidence Matrix

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        CONFIDENCE LEVELS BY THREAT CLASSIFICATION               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  LOW Threat (score < 0.40):                                    â•‘
â•‘  â”œâ”€ Min Confidence: 0.80  (to avoid false alerts)              â•‘
â•‘  â”œâ”€ Example: Person walking calmly                             â•‘
â•‘  â”œâ”€ False Positive Risk: <5% (minimal action taken)            â•‘
â•‘  â””â”€ Action: Monitor only                                       â•‘
â•‘                                                                 â•‘
â•‘  MEDIUM Threat (0.40 â‰¤ score â‰¤ 0.65):                         â•‘
â•‘  â”œâ”€ Min Confidence: 0.80  (optional human review)              â•‘
â•‘  â”œâ”€ Example: Person moving quickly, jerky motions              â•‘
â•‘  â”œâ”€ False Positive Risk: 10-15%                                â•‘
â•‘  â””â”€ Action: Record, tag for review, optional alert             â•‘
â•‘                                                                 â•‘
â•‘  HIGH Threat (0.65 < score â‰¤ 0.85):                           â•‘
â•‘  â”œâ”€ Min Confidence: 0.85  (high precision required)            â•‘
â•‘  â”œâ”€ Example: Running, aggressive behavior toward people        â•‘
â•‘  â”œâ”€ False Positive Risk: 5-10%                                 â•‘
â•‘  â””â”€ Action: Security alert, backend notification               â•‘
â•‘                                                                 â•‘
â•‘  CRITICAL Threat (score > 0.85):                               â•‘
â•‘  â”œâ”€ Min Confidence: 0.90+  (very high precision)               â•‘
â•‘  â”œâ”€ Example 1: Weapon detected (>0.94 confidence)              â•‘
â•‘  â”œâ”€ Example 2: Aggressive attack on another person             â•‘
â•‘  â”œâ”€ False Positive Risk: <2% (weapon detection is critical)    â•‘
â•‘  â””â”€ Action: Emergency lockdown + police dispatch + full loggingâ”‚
â•‘                                                                 â•‘
â•‘  WEAPON DETECTION THRESHOLD:                                   â•‘
â•‘  â”œâ”€ Firearm detection: 0.96+ confidence required               â•‘
â•‘  â”œâ”€ Knife detection: 0.93+ confidence required                 â•‘
â•‘  â”œâ”€ Blunt object as weapon: 0.91+ confidence required          â•‘
â•‘  â””â”€ Multiple detections = higher confidence boost              â•‘
â•‘                                                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Key Takeaway

SafeSphere's threat escalation model provides **near-instant detection and automatic response** with multiple layers of validation:

1. **Fast**: 0-50ms from frame capture to threat classification
2. **Accurate**: Multi-factor analysis prevents false positives
3. **Contextual**: Spatial and environmental factors adjust scoring
4. **Escalable**: Single frame can't trigger false alert (needs temporal confirmation)
5. **Actionable**: Backend integration enables immediate human response

This transforms emergency response from **2-5 minute manual detection** to **<500ms full emergency activation**! ğŸš¨
